@Configuration
@EnableJpaRepositories(
        basePackages = "com.project.PatientService.repositories.patient",   // <-- Update this path
        entityManagerFactoryRef = "patientEntityManagerFactory",
        transactionManagerRef = "patientTransactionManager"
)
public class PatientDBConfig {

    @Bean
    @ConfigurationProperties("spring.datasource.primary")
    public DataSourceProperties patientDBProperties() {
        return new DataSourceProperties();
    }

    @Bean(name = "patientDataSource")
    public DataSource patientDataSource() {
        return patientDBProperties().initializeDataSourceBuilder().build();
    }

    @Bean(name = "patientEntityManagerFactory")
    public LocalContainerEntityManagerFactoryBean patientEntityManagerFactory() {
        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();
        factory.setDataSource(patientDataSource());
        factory.setPackagesToScan("com.project.PatientService.entities");  // <-- Your entity package
        factory.setJpaVendorAdapter(new HibernateJpaVendorAdapter());
        return factory;
    }

    @Bean(name = "patientTransactionManager")
    public PlatformTransactionManager patientTransactionManager(
            @Qualifier("patientEntityManagerFactory") EntityManagerFactory factory) {
        return new JpaTransactionManager(factory);
    }
}
