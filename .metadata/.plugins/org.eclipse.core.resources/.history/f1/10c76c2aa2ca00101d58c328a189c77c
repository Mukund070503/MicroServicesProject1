@RestController
@RequestMapping("/patient/appointment")
@RequiredArgsConstructor
public class AppointmentController {

    private final DoctorServiceClient doctorClient;
    private final VisitViewService visitService;

    @GetMapping("/doctors")
    public ResponseEntity<List<DoctorDTO>> getDoctors() {
        return ResponseEntity.ok(doctorClient.getAllDoctors());
    }

    @GetMapping("/{doctorId}/availability")
    public ResponseEntity<List<AvailabilityDTO>> getDoctorAvailability(
            @PathVariable Long doctorId) {
        return ResponseEntity.ok(doctorClient.getAvailability(doctorId));
    }

    @PostMapping("/book")
    public ResponseEntity<Object> book(@RequestBody BookVisitDTO dto) {
        return ResponseEntity.ok(visitService.bookVisit(dto));
    }
}
